parameters:
  CeapexPat: $(dn-bot-ceapex-package-r)
  GithubPat: $(BotAccount-dotnet-bot-repo-PAT)

steps:
- task: Powershell@2
  inputs:
    filePath: $(Build.SourcesDirectory)/eng/common/generate-locproject.ps1
  displayName: Generate LocProject.json

- task: OneLocBuild@2
  displayName: OneLocBuild
  inputs:
    locProj: Localize/LocProject.json
    outDir: $(Build.ArtifactStagingDirectory)
    isCreatePrSelected: true
    repoType: gitHub
    gitHubPatVariable: "${{ parameters.GithubPat }}"
    packageSourceAuth: patAuth
    patVariable: ${{ parameters.CeapexPat }}
  continueOnError: true
  condition: always()

- task: PublishBuildArtifacts@1
  displayName: Publish Localization Files
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)/loc'
    PublishLocation: Container
    ArtifactName: Loc
  continueOnError: true
  condition: always()